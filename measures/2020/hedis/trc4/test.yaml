measure_id: measure.Hedis.2020.Trc4
test_set_keys:
  organization_key:
    episodes_of_care:
      - name: Too Young
        start_date: 2016-01-31
        denominator:
        denominator_exclusion:
        denominator_exception:
        numerator:
      - name: Age Lower
        start_date: 2016-01-31
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: DenominatorDischarge Before
        start_date: 2015-12-31
        denominator:
        denominator_exclusion:
        denominator_exception:
        numerator:
      - name: DenominatorDischarge Lower
        start_date: 2016-01-01
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: DenominatorDischarge Upper
        start_date: 2016-12-01
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: DenominatorDischarge After
        start_date: 2016-12-02
        denominator:
        denominator_exclusion:
        denominator_exception:
        numerator:
      - name: DenominatorDischarge 30Days # Within 30 days before
        start_date: 2016-01-01
        denominator:
        denominator_exclusion:
        denominator_exception:
        numerator:
      - name: DenominatorDischarge 30Days # Last discharge in series
        start_date: 2016-01-02
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: DenominatorDischarge 30Days # Within 30 days before
        start_date: 2016-11-30
        denominator:
        denominator_exclusion:
        denominator_exception:
        numerator:
      - name: DenominatorDischarge 30Days # After deadline
        start_date: 2016-12-02
        denominator:
        denominator_exclusion:
        denominator_exception:
        numerator:
      - name: Denominator ExclusionBefore # Before
        start_date: 2016-02-20
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: Denominator ExclusionLower # Lower
        start_date: 2016-02-20
        denominator:
        denominator_exclusion:
        denominator_exception:
        numerator:
      - name: Denominator ExclusionUpper # Upper
        start_date: 2016-02-20
        denominator:
        denominator_exclusion:
        denominator_exception:
        numerator:
      - name: Denominator ExclusionAfter # After
        start_date: 2016-02-20
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: PerformanceMet 1111F # Before
        start_date: 2016-02-20
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: PerformanceMet 1111F # Lower
        start_date: 2016-04-20
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: PerformanceMet 1111F # Upper
        start_date: 2016-06-20
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: PerformanceMet 1111F # After
        start_date: 2016-08-20
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: PerformanceMet Reconciliation # Before
        start_date: 2016-02-20
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: PerformanceMet Reconciliation # Lower
        start_date: 2016-04-20
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: PerformanceMet Reconciliation # Upper
        start_date: 2016-06-20
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: PerformanceMet Reconciliation # After
        start_date: 2016-08-20
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
providers:
  - given_name: Rachel
    family_name:  Katz
    credential: DO
    primary_specialty:  Family Medicine
    external_id: 111
  - given_name: Patty
    family_name:  Smith
    credential: MD
    primary_specialty:  Family Medicine
    external_id: 222
patients:
- name: Too Young
  attributes:
    date_of_birth: 1999-01-01 # Too late
    given_name: Too
    family_name: Young
    sex: Male
  clinical_models:
    clinical_activities:
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2016-01-31
      discharge_date: 2016-01-31
- name: Age Lower
  attributes:
    date_of_birth: 1998-12-31 # Lower bound
    given_name: Age
    family_name: Lower
    sex: Male
  clinical_models:
    clinical_activities:
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2016-01-31
      discharge_date: 2016-01-31
- name: DenominatorDischarge Before
  attributes:
    date_of_birth: 1990-01-01
    given_name: DenominatorDischarge
    family_name: Before
    sex: Male
  clinical_models:
    clinical_activities:
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2015-12-31
      discharge_date: 2015-12-31  # Too early
- name: DenominatorDischarge Lower
  attributes:
    date_of_birth: 1990-01-01
    given_name: DenominatorDischarge
    family_name: Lower
    sex: Male
  clinical_models:
    clinical_activities:
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2016-01-01
      discharge_date: 2016-01-01  # Lower bound
- name: DenominatorDischarge Upper
  attributes:
    date_of_birth: 1990-01-01
    given_name: DenominatorDischarge
    family_name: Upper
    sex: Male
  clinical_models:
    clinical_activities:
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2016-12-01
      discharge_date: 2016-12-01  # Upper bound
- name: DenominatorDischarge After
  attributes:
    date_of_birth: 1990-01-01
    given_name: DenominatorDischarge
    family_name: After
    sex: Male
  clinical_models:
    clinical_activities:
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2016-12-02
      discharge_date: 2016-12-02  # Too late
- name: DenominatorDischarge 30Days
  attributes:
    date_of_birth: 1990-01-01
    given_name: DenominatorDischarge
    family_name: 30Days
    sex: Male
  clinical_models:
    clinical_activities:
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2016-01-01
      discharge_date: 2016-01-01 # Within 30 days before
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2016-01-02
      discharge_date: 2016-01-02  # Last discharge in series
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2016-11-30
      discharge_date: 2016-11-30  # Within 30 days before
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2016-12-02
      discharge_date: 2016-12-02  # Too late
- name: Denominator ExclusionBefore
  attributes:
    date_of_birth: 1990-01-01
    given_name: Denominator
    family_name: ExclusionBefore
    sex: Male
  clinical_models:
    clinical_activities:
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2016-02-20
      discharge_date: 2016-03-01
      provider: Rachel
    - code_type: CPT
      code_value: G9691 # Hospice service
      start_date: 2015-12-31 # Too early
- name: Denominator ExclusionLower
  attributes:
    date_of_birth: 1990-01-01
    given_name: Denominator
    family_name: ExclusionLower
    sex: Male
  clinical_models:
    clinical_activities:
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2016-02-20
      discharge_date: 2016-03-01
    - code_type: CPT
      code_value: G9691 # Hospice service
      start_date: 2016-01-01 # Lower bound
- name: Denominator ExclusionUpper
  attributes:
    date_of_birth: 1990-01-01
    given_name: Denominator
    family_name: ExclusionUpper
    sex: Male
  clinical_models:
    clinical_activities:
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2016-02-20
      discharge_date: 2016-03-01
    - code_type: CPT
      code_value: G9691 # Hospice service
      start_date: 2016-12-31 # Upper bound
- name: Denominator ExclusionAfter
  attributes:
    date_of_birth: 1990-01-01
    given_name: Denominator
    family_name: ExclusionAfter
    sex: Male
  clinical_models:
    clinical_activities:
    - code_type: UB
      code_value: '0100'
      admission_date: 2016-02-20
      discharge_date: 2016-03-01
    - code_type: CPT
      code_value: G9691 # Hospice service
      start_date: 2017-01-01 # Too late
- name: PerformanceMet 1111F
  attributes:
    date_of_birth: 1990-01-01
    given_name: PerformanceMet
    family_name: 1111F
    sex: Male
  clinical_models:
    clinical_activities:
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2016-02-20
      discharge_date: 2016-03-01
    - code_type: CPT
      code_value: 1111F # Performance met
      start_date: 2016-02-28 # Too early
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2016-04-20
      discharge_date: 2016-05-01
    - code_type: CPT
      code_value: 1111F # Performance met
      start_date: 2016-05-01 # Lower bound
    - code_type: UB
      code_value: '0100' # Discharge
      admission_date: 2016-06-20
      discharge_date: 2016-07-01
    - code_type: CPT
      code_value: 1111F # Performance met
      start_date: 2016-07-31 # Upper bound
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2016-08-20
      Discharge_date: 2016-09-01
    - code_type: CPT
      code_value: 1111F # Performance met
      start_date: 2016-10-02 # Too late
- name: PerformanceMet Reconciliation
  attributes:
    date_of_birth: 1990-01-01
    given_name: PerformanceMet
    family_name: Reconciliation
    sex: Male
  clinical_models:
    clinical_activities:
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2016-02-20
      discharge_date: 2016-03-01
    - code_type: SNOMEDCT
      code_value: 430193006 # Medication reconciliation
      start_date: 2016-02-28 # Too early
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2016-04-20
      discharge_date: 2016-05-01
    - code_type: SNOMEDCT
      code_value: 430193006 # Medication reconciliation
      start_date: 2016-05-01 # Lower bound
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2016-06-20
      discharge_date: 2016-07-01
    - code_type: SNOMEDCT
      code_value: 430193006 # Medication reconciliation
      start_date: 2016-07-31 # Upper bound
    - code_type: UB
      code_value: '0100'  # Discharge
      admission_date: 2016-08-20
      discharge_date: 2016-09-01
    - code_type: SNOMEDCT
      code_value: 430193006 # Medication reconciliation
      start_date: 2016-10-02 # Too late
