measure_id: 18.HEDIS.Chl
test_set_keys:
  organization_key:
    patients:
    - name: Too Young
      denominator:
      denominator_exclusion:
      denominator_exception:
      numerator:
    - name: Age Lower
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: Age Upper
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: Too Old
      denominator:
      denominator_exclusion:
      denominator_exception:
      numerator:
    - name: Patient Male
      denominator:
      denominator_exclusion:
      denominator_exception:
      numerator:
    - name: SexualActivityProcedure Before
      denominator:
      denominator_exclusion:
      denominator_exception:
      numerator:
    - name: SexualActivityProcedure Lower
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: SexualActivityProcedure Upper
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: SexualActivityProcedure After
      denominator:
      denominator_exclusion:
      denominator_exception:
      numerator:
    - name: SexualActivityDiagnosis Before
      denominator:
      denominator_exclusion:
      denominator_exception:
      numerator:
    - name: SexualActivityDiagnosis Lower
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: SexualActivityDiagnosis Upper
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: SexualActivityDiagnosis After
      denominator:
      denominator_exclusion:
      denominator_exception:
      numerator:
    - name: SexualActivityLab Before
      denominator:
      denominator_exclusion:
      denominator_exception:
      numerator:
    - name: SexualActivityLab Lower
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: SexualActivityLab Upper
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: SexualActivityLab After
      denominator:
      denominator_exclusion:
      denominator_exception:
      numerator:
    - name: SexualActivityMedication Before
      denominator:
      denominator_exclusion:
      denominator_exception:
      numerator:
    - name: SexualActivityMedication Lower
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: SexualActivityMedication Upper
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: SexualActivityMedication After
      denominator:
      denominator_exclusion:
      denominator_exception:
      numerator:
    - name: ExclusionHospice Before
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: ExclusionHospice Lower
      denominator:
      denominator_exclusion:
      denominator_exception:
      numerator:
    - name: ExclusionHospice Upper
      denominator:
      denominator_exclusion:
      denominator_exception:
      numerator:
    - name: ExclusionHospice After
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: ExclusionRetinoid Before
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: ExclusionRetinoid Lower
      denominator: 1
      denominator_exclusion: exclusion_1
      denominator_exception:
      numerator:
    - name: ExclusionRetinoid Upper
      denominator: 1
      denominator_exclusion: exclusion_1
      denominator_exception:
      numerator:
    - name: ExclusionRetinoid After
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: ExclusionRadiology Before
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: ExclusionRadiology Lower
      denominator: 1
      denominator_exclusion: exclusion_1
      denominator_exception:
      numerator:
    - name: ExclusionRadiology Upper
      denominator: 1
      denominator_exclusion: exclusion_1
      denominator_exception:
      numerator:
    - name: ExclusionRadiology After
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: ExclusionRadiology NotJustPregnancyTest
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: ScreeningProcedure Before
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: ScreeningProcedure Lower
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: ScreeningProcedure Upper
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: ScreeningProcedure After
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: ScreeningLab Before
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: ScreeningLab Lower
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: ScreeningLab Upper
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: ScreeningLab After
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
providers:
  - given_name: Rachel
    family_name: Katz
    external_id: '111-111'
    credential: DO
    primary_specialty: Family Medicine
  - given_name: Patty
    family_name: Smith
    external_id: '222-222'
    credential: MD
    primary_specialty: Family Medicine
patients:
- name: Too Young
  attributes:
    date_of_birth: 2001-01-01 # Too late
    given_name: Too
    family_name: Young
    sex: Female
  clinical_models:
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2016-01-01
- name: Age Lower
  attributes:
    date_of_birth: 2000-12-31 # Lower bound
    given_name: Age
    family_name: Lower
    sex: Female
  clinical_models:
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2016-01-01
- name: Age Upper
  attributes:
    date_of_birth: 1992-01-01 # Upper bound
    given_name: Age
    family_name: Upper
    sex: Female
  clinical_models:
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2016-01-01
- name: Too Old
  attributes:
    date_of_birth: 1991-12-31 # Too early
    given_name: Too
    family_name: Old
    sex: Female
  clinical_models:
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2016-01-01
- name: Patient Male
  attributes:
    date_of_birth: 1998-01-01
    given_name: Patient
    family_name: Male
    sex: Male
  clinical_models:
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity) - yes, I know this patient is male
      start_date: 2016-01-01
- name: SexualActivityProcedure Before
  attributes:
    date_of_birth: 1998-01-01
    given_name: SexualActivityProcedure
    family_name: Before
    sex: Female
  clinical_models:
    clinical_activities:
    - code_type: CPT
      code_value: 81025 # Pregnancy test (sexual activity)
      start_date: 2015-12-31 # Too early
- name: SexualActivityProcedure Lower
  attributes:
    date_of_birth: 1998-01-01
    given_name: SexualActivityProcedure
    family_name: Lower
    sex: Female
  clinical_models:
    clinical_activities:
    - code_type: CPT
      code_value: 81025 # Pregnancy test (sexual activity)
      start_date: 2016-01-01 # Lower bound
- name: SexualActivityProcedure Upper
  attributes:
    date_of_birth: 1998-01-01
    given_name: SexualActivityProcedure
    family_name: Upper
    sex: Female
  clinical_models:
    clinical_activities:
    - code_type: CPT
      code_value: 81025 # Pregnancy test (sexual activity)
      start_date: 2016-12-31 # Upper bound
- name: SexualActivityProcedure After
  attributes:
    date_of_birth: 1998-01-01
    given_name: SexualActivityProcedure
    family_name: After
    sex: Female
  clinical_models:
    clinical_activities:
    - code_type: CPT
      code_value: 81025 # Pregnancy test (sexual activity)
      start_date: 2017-01-01 # Too late
- name: SexualActivityDiagnosis Before
  attributes:
    date_of_birth: 1998-01-01
    given_name: SexualActivityDiagnosis
    family_name: Before
    sex: Female
  clinical_models:
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2015-04-01
      stop_date: 2015-12-31 # Lower bound
- name: SexualActivityDiagnosis Lower
  attributes:
    date_of_birth: 1998-01-01
    given_name: SexualActivityDiagnosis
    family_name: Lower
    sex: Female
  clinical_models:
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2015-04-01
      stop_date: 2016-01-01 # Lower bound
- name: SexualActivityDiagnosis Upper
  attributes:
    date_of_birth: 1998-01-01
    given_name: SexualActivityDiagnosis
    family_name: Upper
    sex: Female
  clinical_models:
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2016-12-31 # Upper bound
- name: SexualActivityDiagnosis After
  attributes:
    date_of_birth: 1998-01-01
    given_name: SexualActivityDiagnosis
    family_name: After
    sex: Female
  clinical_models:
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2017-01-01 # Too late
- name: SexualActivityLab Before
  attributes:
    date_of_birth: 1998-01-01
    given_name: SexualActivityLab
    family_name: Before
    sex: Female
  clinical_models:
    laboratory_test_performeds:
    - code_type: LOINC
      code_value: 10524-7 # Pap test (sexual activity)
      start_date: 2015-12-31 # Too early
- name: SexualActivityLab Lower
  attributes:
    date_of_birth: 1998-01-01
    given_name: SexualActivityLab
    family_name: Lower
    sex: Female
  clinical_models:
    laboratory_test_performeds:
    - code_type: LOINC
      code_value: 10524-7 # Pap test (sexual activity)
      start_date: 2016-01-01 # Lower bound
- name: SexualActivityLab Upper
  attributes:
    date_of_birth: 1998-01-01
    given_name: SexualActivityLab
    family_name: Upper
    sex: Female
  clinical_models:
    laboratory_test_performeds:
    - code_type: LOINC
      code_value: 10524-7 # Pap test (sexual activity)
      start_date: 2016-12-31 # Upper bound
- name: SexualActivityLab After
  attributes:
    date_of_birth: 1998-01-01
    given_name: SexualActivityLab
    family_name: After
    sex: Female
  clinical_models:
    laboratory_test_performeds:
    - code_type: LOINC
      code_value: 10524-7 # Pap test (sexual activity)
      start_date: 2017-01-01 # Too late
- name: SexualActivityMedication Before
  attributes:
    date_of_birth: 1998-01-01
    given_name: SexualActivityMedication
    family_name: Before
    sex: Female
  clinical_models:
    medications:
    - code_type: RXNORM
      code_value: 1000126 # Contraceptive medication (sexual activity)
      start_date: 2015-04-01
      stop_date: 2015-12-31 # Lower bound
- name: SexualActivityMedication Lower
  attributes:
    date_of_birth: 1998-01-01
    given_name: SexualActivityMedication
    family_name: Lower
    sex: Female
  clinical_models:
    medications:
    - code_type: RXNORM
      code_value: 1000126 # Contraceptive medication (sexual activity)
      start_date: 2015-04-01
      stop_date: 2016-01-01 # Lower bound
- name: SexualActivityMedication Upper
  attributes:
    date_of_birth: 1998-01-01
    given_name: SexualActivityMedication
    family_name: Upper
    sex: Female
  clinical_models:
    medications:
    - code_type: RXNORM
      code_value: 1000126 # Contraceptive medication (sexual activity)
      start_date: 2016-12-31 # Upper bound
- name: SexualActivityMedication After
  attributes:
    date_of_birth: 1998-01-01
    given_name: SexualActivityMedication
    family_name: After
    sex: Female
  clinical_models:
    medications:
    - code_type: RXNORM
      code_value: 1000126 # Contraceptive medication (sexual activity)
      start_date: 2017-01-01 # Too late
- name: ExclusionHospice Before
  attributes:
    date_of_birth: 1998-01-01
    given_name: ExclusionHospice
    family_name: Before
    sex: Female
  clinical_models:
    clinical_activities:
    - code_type: CPT
      code_value: G9687 # Hospice
      start_date: 2015-12-31 # Too early
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2016-01-01
- name: ExclusionHospice Lower
  attributes:
    date_of_birth: 1998-01-01
    given_name: ExclusionHospice
    family_name: Lower
    sex: Female
  clinical_models:
    clinical_activities:
    - code_type: CPT
      code_value: G9687 # Hospice
      start_date: 2016-01-01 # Lower bound
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2016-01-01
- name: ExclusionHospice Upper
  attributes:
    date_of_birth: 1998-01-01
    given_name: ExclusionHospice
    family_name: Upper
    sex: Female
  clinical_models:
    clinical_activities:
    - code_type: CPT
      code_value: G9687 # Hospice
      start_date: 2016-12-31 # Upper bound
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2016-01-01
- name: ExclusionHospice After
  attributes:
    date_of_birth: 1998-01-01
    given_name: ExclusionHospice
    family_name: After
    sex: Female
  clinical_models:
    clinical_activities:
    - code_type: CPT
      code_value: G9687 # Hospice
      start_date: 2017-01-01 # Too late
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2016-01-01
- name: ExclusionRetinoid Before
  attributes:
    date_of_birth: 1998-01-01
    given_name: ExclusionRetinoid
    family_name: Before
    sex: Female
  clinical_models:
    laboratory_test_performeds:
    - code_type: LOINC
      code_value: 2110-5 # Pregnancy test exclusion
      start_date: 2016-02-14
    medications:
    - code_type: NDC
      code_value: '00378661193' # Retinoid medication
      start_date: 2015-02-13 # Too early
    clinical_activities:
    - code_type: CPT
      code_value: 81025 # Pregnancy test (sexual activity)
      start_date: 2016-01-01
- name: ExclusionRetinoid Lower
  attributes:
    date_of_birth: 1998-01-01
    given_name: ExclusionRetinoid
    family_name: Lower
    sex: Female
  clinical_models:
    laboratory_test_performeds:
    - code_type: LOINC
      code_value: 2110-5 # Pregnancy test exclusion
      start_date: 2016-02-14
    medications:
    - code_type: NDC
      code_value: '00378661193' # Retinoid medication
      start_date: 2016-02-14 # Lower bound
    clinical_activities:
    - code_type: CPT
      code_value: 81025 # Pregnancy test (sexual activity)
      start_date: 2016-01-01
- name: ExclusionRetinoid Upper
  attributes:
    date_of_birth: 1998-01-01
    given_name: ExclusionRetinoid
    family_name: Upper
    sex: Female
  clinical_models:
    laboratory_test_performeds:
    - code_type: LOINC
      code_value: 2110-5 # Pregnancy test exclusion
      start_date: 2016-02-14
    medications:
    - code_type: NDC
      code_value: '00378661193' # Retinoid medication
      start_date: 2016-02-20 # Upper bound
    clinical_activities:
    - code_type: CPT
      code_value: 81025 # Pregnancy test (sexual activity)
      start_date: 2016-01-01
- name: ExclusionRetinoid After
  attributes:
    date_of_birth: 1998-01-01
    given_name: ExclusionRetinoid
    family_name: After
    sex: Female
  clinical_models:
    laboratory_test_performeds:
    - code_type: LOINC
      code_value: 2110-5 # Pregnancy test exclusion
      start_date: 2016-02-14
    medications:
    - code_type: NDC
      code_value: '00378661193' # Retinoid medication
      start_date: 2016-02-21 # Too late
    clinical_activities:
    - code_type: CPT
      code_value: 81025 # Pregnancy test (sexual activity)
      start_date: 2016-01-01
- name: ExclusionRadiology Before
  attributes:
    date_of_birth: 1998-01-01
    given_name: ExclusionRadiology
    family_name: Before
    sex: Female
  clinical_models:
    laboratory_test_performeds:
    - code_type: LOINC
      code_value: 2110-5 # Pregnancy test exclusion
      start_date: 2016-02-14
    clinical_activities:
    - code_type: CPT
      code_value: 81025 # Pregnancy test (sexual activity)
      start_date: 2016-01-01
    - code_type: CPT
      code_value: 70010 # Diagnostic radiology
      start_date: 2015-02-13 # Too early
- name: ExclusionRadiology Lower
  attributes:
    date_of_birth: 1998-01-01
    given_name: ExclusionRadiology
    family_name: Lower
    sex: Female
  clinical_models:
    laboratory_test_performeds:
    - code_type: LOINC
      code_value: 2110-5 # Pregnancy test exclusion
      start_date: 2016-02-14
    clinical_activities:
    - code_type: CPT
      code_value: 81025 # Pregnancy test (sexual activity)
      start_date: 2016-01-01
    - code_type: CPT
      code_value: 70010 # Diagnostic radiology
      start_date: 2016-02-14 # Lower bound
- name: ExclusionRadiology Upper
  attributes:
    date_of_birth: 1998-01-01
    given_name: ExclusionRadiology
    family_name: Upper
    sex: Female
  clinical_models:
    laboratory_test_performeds:
    - code_type: LOINC
      code_value: 2110-5 # Pregnancy test exclusion
      start_date: 2016-02-14
    clinical_activities:
    - code_type: CPT
      code_value: 81025 # Pregnancy test (sexual activity)
      start_date: 2016-01-01
    - code_type: CPT
      code_value: 70010 # Diagnostic radiology
      start_date: 2016-02-20 # Upper bound
- name: ExclusionRadiology After
  attributes:
    date_of_birth: 1998-01-01
    given_name: ExclusionRadiology
    family_name: After
    sex: Female
  clinical_models:
    laboratory_test_performeds:
    - code_type: LOINC
      code_value: 2110-5 # Pregnancy test exclusion
      start_date: 2016-02-14
    clinical_activities:
    - code_type: CPT
      code_value: 81025 # Pregnancy test (sexual activity)
      start_date: 2016-01-01
    - code_type: CPT
      code_value: 70010 # Diagnostic radiology
      start_date: 2016-02-21 # Too late
- name: ExclusionRadiology NotJustPregnancyTest
  attributes:
    date_of_birth: 1998-01-01
    given_name: ExclusionRadiology
    family_name: NotJustPregnancyTest
    sex: Female
  clinical_models:
    laboratory_test_performeds:
    - code_type: LOINC
      code_value: 2110-5 # Pregnancy test exclusion
      start_date: 2016-02-14
    clinical_activities:
    - code_type: CPT
      code_value: 81025 # Pregnancy test (sexual activity)
      start_date: 2016-01-01
    - code_type: CPT
      code_value: 70010 # Diagnostic radiology
      start_date: 2016-02-21 # Too late
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2015-04-01
- name: ScreeningProcedure Before
  attributes:
    date_of_birth: 1998-01-01
    given_name: ScreeningProcedure
    family_name: Before
    sex: Female
  clinical_models:
    clinical_activities:
    - code_type: CPT
      code_value: 87270 # Chlamydia test
      start_date: 2015-12-31 # Too early
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2016-01-01
- name: ScreeningProcedure Lower
  attributes:
    date_of_birth: 1998-01-01
    given_name: ScreeningProcedure
    family_name: Lower
    sex: Female
  clinical_models:
    clinical_activities:
    - code_type: CPT
      code_value: 87270 # Chlamydia test
      start_date: 2016-01-01 # Lower bound
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2016-01-01
- name: ScreeningProcedure Upper
  attributes:
    date_of_birth: 1998-01-01
    given_name: ScreeningProcedure
    family_name: Upper
    sex: Female
  clinical_models:
    clinical_activities:
    - code_type: CPT
      code_value: 87270 # Chlamydia test
      start_date: 2016-12-31 # Upper bound
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2016-01-01
- name: ScreeningProcedure After
  attributes:
    date_of_birth: 1998-01-01
    given_name: ScreeningProcedure
    family_name: After
    sex: Female
  clinical_models:
    clinical_activities:
    - code_type: CPT
      code_value: 87270 # Chlamydia test
      start_date: 2017-01-01 # Too late
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2016-01-01
- name: ScreeningLab Before
  attributes:
    date_of_birth: 1998-01-01
    given_name: ScreeningLab
    family_name: Before
    sex: Female
  clinical_models:
    laboratory_test_performeds:
    - code_type: LOINC
      code_value: 14463-4 # Chlamydia test
      start_date: 2015-12-31 # Too early
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2016-01-01
- name: ScreeningLab Lower
  attributes:
    date_of_birth: 1998-01-01
    given_name: ScreeningLab
    family_name: Lower
    sex: Female
  clinical_models:
    laboratory_test_performeds:
    - code_type: LOINC
      code_value: 14463-4 # Chlamydia test
      start_date: 2016-01-01 # Lower bound
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2016-01-01
- name: ScreeningLab Upper
  attributes:
    date_of_birth: 1998-01-01
    given_name: ScreeningLab
    family_name: Upper
    sex: Female
  clinical_models:
    laboratory_test_performeds:
    - code_type: LOINC
      code_value: 14463-4 # Chlamydia test
      start_date: 2016-12-31 # Upper bound
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2016-01-01
- name: ScreeningLab After
  attributes:
    date_of_birth: 1998-01-01
    given_name: ScreeningLab
    family_name: After
    sex: Female
  clinical_models:
    laboratory_test_performeds:
    - code_type: LOINC
      code_value: 14463-4 # Chlamydia test
      start_date: 2017-01-01 # Too late
    diagnoses:
    - code_type: ICD10CM
      code_value: O00.0 # Pregnancy (sexual activity)
      start_date: 2016-01-01
