measure_id: measure.PI.2019.Stage3ppa
test_set_keys:
  organization_key:
    patients:
    - name: DenominatorEncounter Before # Early
      denominator:
      denominator_exclusion:
      denominator_exception:
      numerator:
    - name: DenominatorEncounter Lower # Lower bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: DenominatorEncounter Upper # Upper Bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: DenominatorEncounter After # Late
      denominator:
      denominator_exclusion:
      denominator_exception:
      numerator:
    - name: DenominatorEncounter DifferentProvider # Different denominator provider
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: Provisioning Before # Early
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: Provisioning Lower # Lower bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: Provisioning Upper # Upper bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: Provisioning After # Late
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: Provisioning 48Hours # Provisioning duration is 48 hours
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: Provisioning 49Hours # Provisioning duration is 49 hours
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: Provisioning WrongEncounter # Provisioning not linked to denominator encounter
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: Provisioning None # Encounter has no associated provisioning event
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: PortalAccess Before # Early
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: PortalAccess Lower # Lower bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: PortalAccess Upper # Upper bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: PortalAccess After # Late
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: APIAccess Before # Early
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: APIAccess Lower # Lower bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: APIAccess Upper # Upper bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: APIAccess After # Late
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: APIOptOut Before # Before end of measurement period
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: APIOptOut After # Late
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: SecondProvisioning Success # Additional provisioning event successfully meets criteria
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: SecondProvisioning 49Hours # Additional provisioning too late
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: SecondProvisioning NoPortal # Additional provisioning too without portal access
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: SecondProvisioning NoAPI # Additional provisioning too without API access or opt out
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
  providers_key:
    - name: Rachel
      patients:
      - name: DenominatorEncounter Before # Early
        denominator:
        denominator_exclusion:
        denominator_exception:
        numerator:
      - name: DenominatorEncounter Lower # Lower bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: DenominatorEncounter Upper # Upper Bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: DenominatorEncounter After # Late
        denominator:
        denominator_exclusion:
        denominator_exception:
        numerator:
      - name: DenominatorEncounter DifferentProvider # Different denominator provider
        denominator:
        denominator_exclusion:
        denominator_exception:
        numerator:
      - name: Provisioning Before # Early
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: Provisioning Lower # Lower bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: Provisioning Upper # Upper bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: Provisioning After # Late
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: PortalAccess Before # Early
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: PortalAccess Lower # Lower bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: PortalAccess Upper # Upper bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: PortalAccess After # Late
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: APIAccess Before # Early
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: APIAccess Lower # Lower bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: APIAccess Upper # Upper bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: APIAccess After # Late
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: APIOptOut Before # Before end of measurement period
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: APIOptOut After # Late
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: SecondProvisioning Success # Additional provisioning event successfully meets criteria
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: SecondProvisioning After # Additional provisioning too late
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: SecondProvisioning NoPortal # Additional provisioning too without portal access
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: SecondProvisioning NoAPI # Additional provisioning too without API access or opt out
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: No Provisioning # Encounter has no associated provisioning event
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
providers:
  - given_name: Rachel
    family_name:  Katz
    credential: DO
    primary_specialty:  Family Medicine
    external_id: '111-111'
  - given_name: Patty
    family_name:  Smith
    credential: MD
    primary_specialty:  Family Medicine
    external_id: '222-222'
patients:
  - name: DenominatorEncounter Before
    attributes:
      date_of_birth: 2000-01-01
      given_name: DenominatorEncounter
      family_name: Before
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2015-12-31 # Too early
        stop_date: 2015-12-31
        start_datetime: 2015-12-31 12:00:00
        stop_datetime: 2015-12-31 13:00:00
        provider: Rachel
  - name: DenominatorEncounter Lower
    attributes:
      date_of_birth: 2000-01-01
      given_name: DenominatorEncounter
      family_name: Lower
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-01-01 # Lower bound
        stop_date: 2016-01-01
        start_datetime: 2016-01-01 12:00:00
        stop_datetime: 2016-01-01 13:00:00
        provider: Rachel
  - name: DenominatorEncounter Upper
    attributes:
      date_of_birth: 2000-01-01
      given_name: DenominatorEncounter
      family_name: Upper
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-12-31 # Upper bound
        stop_date: 2016-12-31
        start_datetime: 2016-12-31 12:00:00
        stop_datetime: 2016-12-31 13:00:00
        provider: Rachel
  - name: DenominatorEncounter After
    attributes:
      date_of_birth: 2000-01-01
      given_name: DenominatorEncounter
      family_name: After
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2017-01-01 # Too late
        stop_date: 2017-01-01
        start_datetime: 2017-01-01 12:00:00
        stop_datetime: 2017-01-01 13:00:00
        provider: Rachel
  - name: DenominatorEncounter DifferentProvider
    attributes:
      date_of_birth: 2000-01-01
      given_name: DenominatorEncounter
      family_name: DifferentProvider
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Patty # Different provider
  - name: Provisioning Before
    attributes:
      date_of_birth: 2000-01-01
      given_name: Provisioning
      family_name: Before
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-12-31 # Early
        stop_date: 2016-12-31
        start_datetime: 2015-12-31 12:00:00
        stop_datetime: 2015-12-31 12:00:00
        encounter_id: 1
      - type: API_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: PORTAL_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
  - name: Provisioning Lower
    attributes:
      date_of_birth: 2000-01-01
      given_name: Provisioning
      family_name: Lower
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-01-01 # Lower bound
        stop_date: 2016-01-01
        start_datetime: 2016-01-01 12:00:00
        stop_datetime: 2016-01-01 12:00:00
        encounter_id: 1
      - type: API_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: PORTAL_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
  - name: Provisioning Upper
    attributes:
      date_of_birth: 2000-01-01
      given_name: Provisioning
      family_name: Upper
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-12-31 # Upper bound
        stop_date: 2016-12-31
        start_datetime: 2016-12-31 12:00:00
        stop_datetime: 2016-12-31 12:00:00
        encounter_id: 1
      - type: API_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: PORTAL_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
  - name: Provisioning After
    attributes:
      date_of_birth: 2000-01-01
      given_name: Provisioning
      family_name: After
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2017-01-01 # Late
        stop_date: 2017-01-01
        start_datetime: 2017-01-01 12:00:00
        stop_datetime: 2017-01-01 12:00:00
        encounter_id: 1
      - type: API_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: PORTAL_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
  - name: Provisioning 48Hours
    attributes:
      date_of_birth: 2000-01-01
      given_name: Provisioning
      family_name: 48Hours
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-05
        stop_date: 2016-02-07
        start_datetime: 2016-02-05 12:00:00
        stop_datetime: 2016-02-07 12:00:00 # 48 hours
        encounter_id: 1
      - type: API_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: PORTAL_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
  - name: Provisioning 49Hours
    attributes:
      date_of_birth: 2000-01-01
      given_name: Provisioning
      family_name: 49Hours
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-05
        stop_date: 2016-02-07
        start_datetime: 2016-02-05 12:00:00
        stop_datetime: 2016-02-07 13:00:00 # 48 hours
        encounter_id: 1
      - type: API_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: PORTAL_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
  - name: Provisioning WrongEncounter
    attributes:
      date_of_birth: 2000-01-01
      given_name: Provisioning
      family_name: WrongEncounter
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      - external_id: 2
        start_date: 2016-03-01
        stop_date: 2016-03-01
        start_datetime: 2016-03-01 12:00:00
        stop_datetime: 2016-03-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-03-01
        stop_date: 2016-03-01
        start_datetime: 2016-03-01 12:00:00
        stop_datetime: 2016-03-01 12:00:00
        encounter_id: 2 # Wrong Encounter
      - type: API_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: PORTAL_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-03-01
        stop_date: 2016-03-10
        start_datetime: 2016-03-01 12:00:00
        stop_datetime: 2016-03-10 12:00:00 # Too late
        encounter_id: 1
  - name: Provisioning None
    attributes:
      date_of_birth: 2000-01-01
      given_name: Provisioning
      family_name: None
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events: # No provisioning event
  - name: PortalAccess Before
    attributes:
      date_of_birth: 2000-01-01
      given_name: PortalAccess
      family_name: Before
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-02 12:00:00 # Patient access date
        encounter_id: 1
      - type: API_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: PORTAL_ACCESS
        start_date: 2010-01-01
        stop_date: 2016-02-02
        start_datetime: 2010-01-01 12:00:00
        stop_datetime: 2016-02-02 11:59:00 # Too early
  - name: PortalAccess Lower
    attributes:
      date_of_birth: 2000-01-01
      given_name: PortalAccess
      family_name: Lower
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-02 12:00:00 # Patient access date
        encounter_id: 1
      - type: API_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: PORTAL_ACCESS
        start_date: 2010-01-01
        stop_date: 2016-02-02
        start_datetime: 2010-01-01 12:00:00
        stop_datetime: 2016-02-02 12:00:00 # Lower bound
  - name: PortalAccess Upper
    attributes:
      date_of_birth: 2000-01-01
      given_name: PortalAccess
      family_name: Upper
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-02 12:00:00 # Patient access date
        encounter_id: 1
      - type: API_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: PORTAL_ACCESS
        start_date: 2016-01-02
        start_datetime: 2016-01-02 12:00:00 # Upper bound
  - name: PortalAccess After
    attributes:
      date_of_birth: 2000-01-01
      given_name: PortalAccess
      family_name: After
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-02 12:00:00 # Patient access date
        encounter_id: 1
      - type: API_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: PORTAL_ACCESS
        start_date: 2016-01-02
        start_datetime: 2016-01-02 12:01:00 # Too late
  - name: APIAccess Before
    attributes:
      date_of_birth: 2000-01-01
      given_name: APIAccess
      family_name: Before
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-02 12:00:00 # Patient access date
        encounter_id: 1
      - type: PORTAL_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: API_ACCESS
        start_date: 2010-01-01
        stop_date: 2016-02-02
        start_datetime: 2010-01-01 12:00:00
        stop_datetime: 2016-02-02 11:59:00 # Too early
  - name: APIAccess Lower
    attributes:
      date_of_birth: 2000-01-01
      given_name: APIAccess
      family_name: Lower
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02 # Patient access date
        encounter_id: 1
      - type: PORTAL_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: API_ACCESS
        start_date: 2010-01-01
        stop_date: 2016-02-02
        start_datetime: 2010-01-01 12:00:00
        stop_datetime: 2016-02-02 12:00:00 # Lower bound
  - name: APIAccess Upper
    attributes:
      date_of_birth: 2000-01-01
      given_name: APIAccess
      family_name: Upper
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02 # Patient access date
        encounter_id: 1
      - type: PORTAL_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: API_ACCESS
        start_date: 2016-01-02
        start_datetime: 2016-01-02 12:00:00 # Upper bound
  - name: APIAccess After
    attributes:
      date_of_birth: 2000-01-01
      given_name: APIAccess
      family_name: After
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02 # Patient access date
        encounter_id: 1
      - type: PORTAL_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: API_ACCESS
        start_date: 2010-01-02
        start_datetime: 2016-01-02 12:01:00 # Too late
  - name: APIOptOut Before
    attributes:
      date_of_birth: 2000-01-01
      given_name: APIOptOut
      family_name: Before
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02
        encounter_id: 1
      - type: PORTAL_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: API_OPT_OUT
        start_date: 2010-01-01
        stop_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00 # Before measurement period
        stp[_datetime: 2010-01-01 12:00:00
  - name: APIOptOut After
    attributes:
      date_of_birth: 2000-01-01
      given_name: APIOptOut
      family_name: After
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02
        encounter_id: 1
      - type: PORTAL_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: API_OPT_OUT
        start_date: 2017-01-01
        stop_date: 2017-01-01
        start_datetime: 2017-01-01 12:00:00 # After measurement period
        stp[_datetime: 2017-01-01 12:00:00
  - name: SecondProvisioning Success
    attributes:
      date_of_birth: 2000-01-01
      given_name: SecondProvisioning
      family_name: Success
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 12:00:00
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 12:00:00
        encounter_id: 1
      - type: API_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: PORTAL_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
  - name: SecondProvisioning 49Hours
    attributes:
      date_of_birth: 2000-01-01
      given_name: SecondProvisioning
      family_name: 49Hours
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 12:00:00
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-03
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-03 13:00:00 # 49 hours
        encounter_id: 1
      - type: API_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: PORTAL_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
  - name: SecondProvisioning NoPortal
    attributes:
      date_of_birth: 2000-01-01
      given_name: SecondProvisioning
      family_name: NoPortal
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 12:00:00
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-02
        stop_date: 2016-02-02 # After portal stop date
        start_datetime: 2016-02-02 12:00:00
        stop_datetime: 2016-02-02 12:00:00
        encounter_id: 1
      - type: API_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
      - type: PORTAL_ACCESS
        start_date: 2010-01-01
        stop_date: 2016-02-01
        start_datetime: 2010-01-01 12:00:00
        stop_datetime: 2016-02-01 12:00:00
  - name: SecondProvisioning NoAPI
    attributes:
      date_of_birth: 2000-01-01
      given_name: SecondProvisioning
      family_name: NoAPI
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 13:00:00
        provider: Rachel
      system_events:
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        stop_datetime: 2016-02-01 12:00:00
      - type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-02
        stop_date: 2016-02-02 # After API stop date
        start_datetime: 2016-02-02 12:00:00
        stop_datetime: 2016-02-02 12:00:00
        encounter_id: 1
      - type: API_ACCESS
        start_date: 2010-01-01
        stop_date: 2016-02-01
        start_datetime: 2010-01-01 12:00:00
        stop_datetime: 2016-02-01 12:00:00
      - type: PORTAL_ACCESS
        start_date: 2010-01-01
        start_datetime: 2010-01-01 12:00:00
