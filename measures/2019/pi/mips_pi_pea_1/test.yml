---
measure_id: measure.Pi.2019.Mipspipea1
test_set_keys:
  organization_key:
    patients:
    - name: DenominatorEncounter Before # Early
      denominator:
      denominator_exclusion:
      denominator_exception:
      numerator:
    - name: DenominatorEncounter Lower # Lower bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: DenominatorEncounter Upper # Upper Bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: DenominatorEncounter After # Late
      denominator:
      denominator_exclusion:
      denominator_exception:
      numerator:
    - name: DenominatorEncounter DifferentProvider # Different denominator provider
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: Provisioning Before # Early
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: Provisioning Lower # Lower bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: Provisioning Upper # Upper bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: Provisioning After # Late
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: Provisioning 4Days # Provisioning duration is 4 business days
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: Provisioning 5Days # Provisioning duration is 5 business days
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: Provisioning Holiday # Provisioning duration is 4 business days if 2/2/16 is a holiday
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: Provisioning WrongEncounter # Provisioning not linked to denominator encounter
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: Provisioning None # Encounter has no associated provisioning event
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: PortalAccess Before # Early
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: PortalAccess Lower # Lower bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: PortalAccess Upper # Upper bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: PortalAccess After # Late
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: APIAccess Before # Early
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: APIAccess Lower # Lower bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: APIAccess Upper # Upper bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: APIAccess After # Late
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: APIOptOut Before # Before end of measurement period
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: APIOptOut After # Late
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: SecondProvisioning Success # Additional provisioning event successfully meets criteria
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: SecondProvisioning 5Days # Additional provisioning too late
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: SecondProvisioning NoPortal # Additional provisioning too without portal access
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: SecondProvisioning NoAPI # Additional provisioning too without API access or opt out
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
  providers_key:
    - name: Rachel
      patients:
      - name: DenominatorEncounter Before # Early
        denominator:
        denominator_exclusion:
        denominator_exception:
        numerator:
      - name: DenominatorEncounter Lower # Lower bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: DenominatorEncounter Upper # Upper Bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: DenominatorEncounter After # Late
        denominator:
        denominator_exclusion:
        denominator_exception:
        numerator:
      - name: DenominatorEncounter DifferentProvider # Different denominator provider
        denominator:
        denominator_exclusion:
        denominator_exception:
        numerator:
      - name: Provisioning Before # Early
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: Provisioning Lower # Lower bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: Provisioning Upper # Upper bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: Provisioning After # Late
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: Provisioning 4Days # Provisioning duration is 4 business days
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: Provisioning 5Days # Provisioning duration is 5 business days
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: Provisioning Holiday # Within range if a holiday date is included
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: Provisioning WrongEncounter # Provisioning not linked to denominator encounter
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: Provisioning None # Encounter has no associated provisioning event
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: PortalAccess Before # Early
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: PortalAccess Lower # Lower bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: PortalAccess Upper # Upper bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: PortalAccess After # Late
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: APIAccess Before # Early
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: APIAccess Lower # Lower bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: APIAccess Upper # Upper bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: APIAccess After # Late
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: APIOptOut Before # Before end of measurement period
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: APIOptOut After # Late
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: SecondProvisioning Success # Additional provisioning event successfully meets criteria
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: SecondProvisioning 5Days # Additional provisioning too late
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: SecondProvisioning NoPortal # Additional provisioning too without portal access
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: SecondProvisioning NoAPI # Additional provisioning too without API access or opt out
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
providers:
  - given_name: Rachel
    family_name:  Katz
    credential: DO
    primary_specialty:  Family Medicine
    external_id: '111-111'
  - given_name: Patty
    family_name:  Smith
    credential: MD
    primary_specialty:  Family Medicine
    external_id: '222-222'
patients:
  - name: DenominatorEncounter Before
    attributes:
      date_of_birth: 2000-01-01
      given_name: DenominatorEncounter
      family_name: Before
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2015-12-31 # Too early
        stop_date: 2015-12-31
        provider: Rachel
  - name: DenominatorEncounter Lower
    attributes:
      date_of_birth: 2000-01-01
      given_name: DenominatorEncounter
      family_name: Lower
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-01-01 # Lower bound
        stop_date: 2016-01-01
        provider: Rachel
  - name: DenominatorEncounter Upper
    attributes:
      date_of_birth: 2000-01-01
      given_name: DenominatorEncounter
      family_name: Upper
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-12-31 # Upper bound
        stop_date: 2016-12-31
        provider: Rachel
  - name: DenominatorEncounter After
    attributes:
      date_of_birth: 2000-01-01
      given_name: DenominatorEncounter
      family_name: After
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2017-01-01 # Too late
        stop_date: 2017-01-01
        provider: Rachel
  - name: DenominatorEncounter DifferentProvider
    attributes:
      date_of_birth: 2000-01-01
      given_name: DenominatorEncounter
      family_name: DifferentProvider
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Patty # Different provider
  - name: Provisioning Before
    attributes:
      date_of_birth: 2000-01-01
      given_name: Provisioning
      family_name: Before
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2015-12-31 # Early
        stop_date: 2015-12-31
        start_datetime: 2015-12-31 12:00:00 # Early
        encounter_external_id: 1
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-01-01
      - event_type: PORTAL_ACCESS
        start_date: 2016-01-01
  - name: Provisioning Lower
    attributes:
      date_of_birth: 2000-01-01
      given_name: Provisioning
      family_name: Lower
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-01-01 # Lower bound
        stop_date: 2016-01-01
        start_datetime: 2016-01-01 12:00:00 # Lower bound
        encounter_external_id: 1
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-01-01
      - event_type: PORTAL_ACCESS
        start_date: 2016-01-01
  - name: Provisioning Upper
    attributes:
      date_of_birth: 2000-01-01
      given_name: Provisioning
      family_name: Upper
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-12-31 # Upper bound
        stop_date: 2016-12-31
        start_datetime: 2016-12-31 12:00:00 # Upper bound
        encounter_external_id: 1
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-01-01
      - event_type: PORTAL_ACCESS
        start_date: 2016-01-01
  - name: Provisioning After
    attributes:
      date_of_birth: 2000-01-01
      given_name: Provisioning
      family_name: After
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2017-01-01 # Late
        stop_date: 2017-01-01
        start_datetime: 2017-01-01 12:00:00 # Late
        encounter_external_id: 1
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-01-01
      - event_type: PORTAL_ACCESS
        start_date: 2016-01-01
  - name: Provisioning 4Days
    attributes:
      date_of_birth: 2000-01-01
      given_name: Provisioning
      family_name: 4Days
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-05 # Friday
        stop_date: 2016-02-11 # 4 business days
        start_datetime: 2016-02-05 12:00:00 # Friday
        encounter_external_id: 1
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-01-01
      - event_type: PORTAL_ACCESS
        start_date: 2016-01-01
  - name: Provisioning 5Days
    attributes:
      date_of_birth: 2000-01-01
      given_name: Provisioning
      family_name: 5Days
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-05 # Friday
        stop_date: 2016-02-12 # 5 business days
        start_datetime: 2016-02-05 12:00:00 # Friday
        encounter_external_id: 1
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-01-01
      - event_type: PORTAL_ACCESS
        start_date: 2016-02-11 # 4 business days
        encounter_external_id: 1
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-01-01
      - event_type: PORTAL_ACCESS
        start_date: 2016-01-01
  - name: Provisioning Holiday
    attributes:
      date_of_birth: 2000-01-01
      given_name: Provisioning
      family_name: Holiday
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01 # Monday
        stop_date: 2016-02-08 # 4 business days if Tues 2/2 is a holiday
        start_datetime: 2016-02-01 12:00:00 # Monday
        encounter_external_id: 1
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-01-01
      - event_type: PORTAL_ACCESS
        start_date: 2016-01-01
  - name: Provisioning WrongEncounter
    attributes:
      date_of_birth: 2000-01-01
      given_name: Provisioning
      family_name: WrongEncounter
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      - external_id: 2
        start_date: 2017-03-01
        stop_date: 2017-03-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-03-01
        stop_date: 2016-03-01
        start_datetime: 2016-03-01 12:00:00
        encounter_external_id: 2 # Wrong Encounter
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-01-01
      - event_type: PORTAL_ACCESS
        start_date: 2016-01-01
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-03-01
        stop_date: 2016-03-10 # Too late
        start_datetime: 2016-03-01 12:00:00
        encounter_external_id: 1
  - name: Provisioning None
    attributes:
      date_of_birth: 2000-01-01
      given_name: Provisioning
      family_name: None
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events: # No provisioning event
  - name: PortalAccess Before
    attributes:
      date_of_birth: 2000-01-01
      given_name: PortalAccess
      family_name: Before
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02 # Patient access date
        start_datetime: 2016-02-01 12:00:00
        encounter_external_id: 1
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-01-01
      - event_type: PORTAL_ACCESS
        start_date: 2016-01-01
        stop_date: 2016-02-01 # Too early
  - name: PortalAccess Lower
    attributes:
      date_of_birth: 2000-01-01
      given_name: PortalAccess
      family_name: Lower
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02 # Patient access date
        start_datetime: 2016-02-01 12:00:00
        encounter_external_id: 1
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-01-01
      - event_type: PORTAL_ACCESS
        start_date: 2016-01-01
        stop_date: 2016-02-02 # Lower bound
  - name: PortalAccess Upper
    attributes:
      date_of_birth: 2000-01-01
      given_name: PortalAccess
      family_name: Upper
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02 # Patient access date
        start_datetime: 2016-02-01 12:00:00
        encounter_external_id: 1
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-02-08
      - event_type: PORTAL_ACCESS
        start_date: 2016-02-08 # Upper bound
  - name: PortalAccess After
    attributes:
      date_of_birth: 2000-01-01
      given_name: PortalAccess
      family_name: After
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02 # Patient access date
        start_datetime: 2016-02-01 12:00:00
        encounter_external_id: 1
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-02-01
      - event_type: PORTAL_ACCESS
        start_date: 2016-02-09 # Too late
  - name: APIAccess Before
    attributes:
      date_of_birth: 2000-01-01
      given_name: APIAccess
      family_name: Before
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02 # Patient access date
        start_datetime: 2016-02-01 12:00:00
        encounter_external_id: 1
      - event_type: PORTAL_ACCESS
        start_date: 2016-01-01
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-01-01
        stop_date: 2016-02-01 # Too early
  - name: APIAccess Lower
    attributes:
      date_of_birth: 2000-01-01
      given_name: APIAccess
      family_name: Lower
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02 # Patient access date
        start_datetime: 2016-02-01 12:00:00
        encounter_external_id: 1
      - event_type: PORTAL_ACCESS
        start_date: 2016-01-01
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-01-01
        stop_date: 2016-02-02 # Lower bound
  - name: APIAccess Upper
    attributes:
      date_of_birth: 2000-01-01
      given_name: APIAccess
      family_name: Upper
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02 # Patient access date
        start_datetime: 2016-02-01 12:00:00
        encounter_external_id: 1
      - event_type: PORTAL_ACCESS
        start_date: 2016-01-01
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-01-08 # Upper bound
  - name: APIAccess After
    attributes:
      date_of_birth: 2000-01-01
      given_name: APIAccess
      family_name: After
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02 # Patient access date
        start_datetime: 2016-02-01 12:00:00
        encounter_external_id: 1
      - event_type: PORTAL_ACCESS
        start_date: 2016-02-01
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-02-09 # Too late
  - name: APIOptOut Before
    attributes:
      date_of_birth: 2000-01-01
      given_name: APIOptOut
      family_name: Before
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02
        start_datetime: 2016-02-01 12:00:00
        encounter_external_id: 1
      - event_type: PORTAL_ACCESS
        start_date: 2016-01-01
      - event_type: API_ACCESS_OPT_OUT
        start_date: 2016-01-01 # Before measurement period
        stop_date: 2016-01-01
  - name: APIOptOut After
    attributes:
      date_of_birth: 2000-01-01
      given_name: APIOptOut
      family_name: After
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-02
        start_datetime: 2016-02-01 12:00:00
        encounter_external_id: 1
      - event_type: PORTAL_ACCESS
        start_date: 2016-01-01
      - event_type: API_ACCESS_OPT_OUT
        start_date: 2017-01-01 # After measurement period
        stop_date: 2017-01-01
  - name: SecondProvisioning Success
    attributes:
      date_of_birth: 2000-01-01
      given_name: SecondProvisioning
      family_name: Success
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
        encounter_external_id: 1
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-01-01
      - event_type: PORTAL_ACCESS
        start_date: 2016-01-01
  - name: SecondProvisioning 5Days
    attributes:
      date_of_birth: 2000-01-01
      given_name: SecondProvisioning
      family_name: 5Days
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-09 # 5 business days
        start_datetime: 2016-02-01 12:00:00
        encounter_external_id: 1
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-01-01
      - event_type: PORTAL_ACCESS
        start_date: 2016-01-01
  - name: SecondProvisioning NoPortal
    attributes:
      date_of_birth: 2000-01-01
      given_name: SecondProvisioning
      family_name: NoPortal
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-02
        stop_date: 2016-02-02 # After portal stop date
        start_datetime: 2016-02-02 12:00:00
        encounter_external_id: 1
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-01-01
      - event_type: PORTAL_ACCESS
        start_date: 2016-01-01
        stop_date: 2016-02-01
  - name: SecondProvisioning NoAPI
    attributes:
      date_of_birth: 2000-01-01
      given_name: SecondProvisioning
      family_name: NoAPI
      sex: Male
    clinical_models:
      encounters:
      - external_id: 1
        start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-01
        stop_date: 2016-02-01
        start_datetime: 2016-02-01 12:00:00
      - event_type: HEALTH_INFORMATION_PROVISIONING
        start_date: 2016-02-02
        stop_date: 2016-02-02 # After API stop date
        start_datetime: 2016-02-02 12:00:00
        encounter_external_id: 1
      - event_type: API_ACCESS_OPT_IN
        start_date: 2016-01-01
        stop_date: 2016-02-01
      - event_type: PORTAL_ACCESS
        start_date: 2016-01-01
