measure_id: measure.Pi.2019.Stage3pghd
test_set_keys:
  organization_key:
    patients:
    - name: DenominatorEncounter Before # Early
      denominator:
      denominator_exclusion:
      denominator_exception:
      numerator:
    - name: DenominatorEncounter Lower # Lower bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: DenominatorEncounter Upper # Upper Bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: DenominatorEncounter After # Late
      denominator:
      denominator_exclusion:
      denominator_exception:
      numerator:
    - name: DenominatorEncounter DifferentProvider # Different denominator provider
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: PGHD Before # Early
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: PGHD Lower # Lower bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: PGHD Upper # Upper Bound
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
    - name: PGHD After # Late
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_not_met
    - name: PGHD DifferentProvider # Different provider
      denominator: 1
      denominator_exclusion:
      denominator_exception:
      numerator: performance_met
  providers_key:
    - name: Rachel
      patients:
      - name: DenominatorEncounter Before # Early
        denominator:
        denominator_exclusion:
        denominator_exception:
        numerator:
      - name: DenominatorEncounter Lower # Lower bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: DenominatorEncounter Upper # Upper Bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: DenominatorEncounter After # Late
        denominator:
        denominator_exclusion:
        denominator_exception:
        numerator:
      - name: DenominatorEncounter DifferentProvider # Different denominator provider
        denominator:
        denominator_exclusion:
        denominator_exception:
        numerator:
      - name: PGHD Before # Early
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: PGHD Lower # Lower bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: PGHD Upper # Upper Bound
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_met
      - name: PGHD After # Late
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
      - name: PGHD DifferentProvider # Different provider
        denominator: 1
        denominator_exclusion:
        denominator_exception:
        numerator: performance_not_met
providers:
  - given_name: Rachel
    family_name:  Katz
    credential: DO
    primary_specialty: Family Medicine
    external_id: '111-111'
  - given_name: Patty
    family_name:  Smith
    credential: MD
    primary_specialty:  Family Medicine
    external_id: '222-222'
patients:
  - name: DenominatorEncounter Before
    attributes:
      date_of_birth: 2000-01-01
      given_name: DenominatorEncounter
      family_name: Before
      sex: Male
    clinical_models:
      encounters:
      - code_type: CPT
        code_value: 015-12-31
        provider: Rachel
        prescribed: true
        start_date: 2015-12-31
  - name: DenominatorEncounter Lower
    attributes:
      date_of_birth: 2000-01-01
      given_name: DenominatorEncounter
      family_name: Lower
      sex: Male
    clinical_models:
      encounters:
      - start_date: 2016-01-01 # Lower bound
        stop_date: 2016-01-01
        provider: Rachel
  - name: DenominatorEncounter Upper
    attributes:
      date_of_birth: 2000-01-01
      given_name: DenominatorEncounter
      family_name: Upper
      sex: Male
    clinical_models:
      encounters:
      - start_date: 2016-12-31 # Upper bound
        stop_date: 2016-12-31
        provider: Rachel
  - name: DenominatorEncounter After
    attributes:
      date_of_birth: 2000-01-01
      given_name: DenominatorEncounter
      family_name: After
      sex: Male
    clinical_models:
      encounters:
      - start_date: 2017-01-01 # Too late
        stop_date: 2017-01-01
        provider: Rachel
  - name: DenominatorEncounter DifferentProvider
    attributes:
      date_of_birth: 2000-01-01
      given_name: DenominatorEncounter
      family_name: DifferentProvider
      sex: Male
    clinical_models:
      encounters:
      - start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Patty
  - name: PGHD Before
    attributes:
      date_of_birth: 2000-01-01
      given_name: PGHD
      family_name: Before
      sex: Male
    clinical_models:
      encounters:
      - start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - code_type: AUTOMATION
        event_type: PGHD_INCORPORATION
        provider: Rachel
        start_date: 2015-12-31 # Before
        stop_date: 2015-12-31
  - name: PGHD Lower
    attributes:
      date_of_birth: 2000-01-01
      given_name: PGHD
      family_name: Lower
      sex: Male
    clinical_models:
      encounters:
      - start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - code_type: AUTOMATION
        event_type: PGHD_INCORPORATION
        provider: Rachel
        start_date: 2016-01-01 # Lower
        stop_date: 2016-01-01
  - name: PGHD Upper
    attributes:
      date_of_birth: 2000-01-01
      given_name: PGHD
      family_name: Upper
      sex: Male
    clinical_models:
      encounters:
      - start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - code_type: AUTOMATION
        event_type: PGHD_INCORPORATION
        provider: Rachel
        start_date: 2016-12-31 # Upper
        stop_date: 2016-12-31
  - name: PGHD After
    attributes:
      date_of_birth: 2000-01-01
      given_name: PGHD
      family_name: After
      sex: Male
    clinical_models:
      encounters:
      - start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - code_type: AUTOMATION
        event_type: PGHD_INCORPORATION
        provider: Rachel
        start_date: 2017-01-01 # After
        stop_date: 2017-01-01
  - name: PGHD DifferentProvider
    attributes:
      date_of_birth: 2000-01-01
      given_name: PGHD
      family_name: DifferentProvider
      sex: Male
    clinical_models:
      encounters:
      - start_date: 2016-02-01
        stop_date: 2016-02-01
        provider: Rachel
      system_events:
      - code_type: AUTOMATION
        event_type: PGHD_INCORPORATION
        provider: Patty # Different provider
        start_date: 2016-02-01
        stop_date: 2016-02-01
